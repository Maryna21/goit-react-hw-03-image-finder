(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{30:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),o=a.n(r),c=a(8),s=a.n(c),i=(a(30),a(4)),l=a(5),u=a(7),h=a(6),m=a(10),g=(a(31),a(9),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchNameImg:""},e.handleNameChange=function(t){e.setState({searchNameImg:t.currentTarget.value.toLowerCase()})},e.hanleSubmit=function(t){if(t.preventDefault(),""===e.state.searchNameImg.trim())return m.b.warning("\u041f\u043e\u043b\u0435 \u043f\u043e\u0448\u0443\u043a\u0443 \u043f\u0443\u0441\u0442\u0435!");e.props.onSubmit(e.state.searchNameImg),e.setState({searchNameImg:""})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.hanleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",onChange:this.handleNameChange})]})})}}]),a}(r.Component)),d=a(14);function p(e){var t=e.src,a=e.alt,r=e.onChangeImg,o=e.largeImg;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:t,alt:a,className:"ImageGalleryItem-image",onClick:r,largeImg:o})})}var j=a(13),b=a.n(j),f=a(23),v=a(11),O=a.n(v);O.a.defaults.baseURL="https://pixabay.com/api/",O.a.defaults.params={key:"19250465-3ecaba10f96f1a4c0424b71f3",image_type:"photo",orientation:"horizontal",per_page:12};var y={getImg:function(){var e=Object(f.a)(b.a.mark((function e(t){var a,n,r,o=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:1,e.prev=1,e.next=4,O.a.get("",{params:{q:t,page:a}});case 4:return n=e.sent,r=n.data,e.abrupt("return",{hits:r.hits,totalHits:r.totalHits});case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{hits:[],totalHits:0});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},I=a(24),w=a.n(I),x=document.querySelector("#modal-root"),S=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackDropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("Modal componentDidMount"),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){console.log("Modal componentWillUnmount"),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(n.jsx)("div",{className:"Overlay",onClick:this.handleBackDropClick,children:Object(n.jsx)("div",{className:"Modal",children:this.props.children})}),x)}}]),a}(r.Component);function C(e){var t=e.onloadMore;return Object(n.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}var N=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={status:"idle",error:null,images:[],showModal:!1,page:1,largeImg:""},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.loadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.handleClickImage=function(t){e.setState({largeImg:t}),e.toggleModal()},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=e.searchNameImg,n=this.props.searchNameImg,r=t.page,o=this.state.page;a!==n&&(this.setState({images:[],page:1}),this.searchMoreImages(n,1)),r!==o&&o>1&&this.searchMoreImages(n,o)}},{key:"searchMoreImages",value:function(e,t){var a=this;this.setState({status:"pending"}),y.getImg(e,t).then((function(t){var n=t.hits;if(0===t.totalHits)return a.setState({images:[],status:"reject"}),Promise.reject(new Error("This ".concat(e," not found")));a.setState((function(e){return{images:[].concat(Object(d.a)(e.images),Object(d.a)(n)),status:"resolved"}}))})).catch((function(e){return a.setState({error:e,status:"rejected"})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.status,r=t.error,o=t.images,c=t.showModal,s=t.largeImg;return Object(n.jsxs)("div",{children:["idle"===a&&Object(n.jsx)("p",{children:"Write seach image name."}),Object(n.jsx)("ul",{className:"ImageGallery",children:o&&o.map((function(t){return Object(n.jsx)(p,{src:t.webformatURL,alt:t.tags,onChangeImg:function(){e.handleClickImage(t.largeImgUrl)}},t.id)}))}),"rejected"===a&&Object(n.jsx)("p",{children:r.message}),"pending"===a&&Object(n.jsx)(w.a,{type:"Circles",color:"#00BFFF",height:100,width:100}),(o.length>0||"resolved"===a)&&Object(n.jsx)(C,{onloadMore:this.loadMore}),c&&Object(n.jsx)(S,{onClose:this.toggleModal,children:Object(n.jsx)("img",{src:s,alt:o.tags})})]})}}]),a}(r.Component),k=(a(72),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchNameImg:""},e.handleFormSubmil=function(t){e.setState({searchNameImg:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(g,{onSubmit:this.handleFormSubmil}),Object(n.jsx)(m.a,{autoClose:3e3,position:"top-center"}),Object(n.jsx)(N,{searchNameImg:this.state.searchNameImg})]})}}]),a}(r.Component)),M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,74)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root")),M()},9:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.9c9e882c.chunk.js.map